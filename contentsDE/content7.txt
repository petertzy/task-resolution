<div data-message-author-role="assistant" data-message-id="abbb8cb9-666b-4e29-888f-b5585165d833" dir="auto" class="min-h-8 text-message relative flex w-full flex-col items-end gap-2 whitespace-normal break-words text-start [.text-message+&amp;]:mt-5" data-message-model-slug="gpt-4o-mini"><div class="flex w-full flex-col gap-1 empty:hidden first:pt-[3px]"><div class="markdown prose w-full break-words dark:prose-invert light"><p data-start="0" data-end="38">Im PWA-Modus wird das Verhalten von Nutzern, die auf einen Link klicken, um ein Abonnement zu kaufen, durch die folgenden Faktoren beeinflusst:</p>
      <h3 data-start="40" data-end="56">1. Wohin f√ºhrt der Kauf-Link?</h3>
      <ul data-start="57" data-end="652">
        <li data-start="57" data-end="261">
          <p data-start="59" data-end="261"><strong data-start="59" data-end="101">Wenn der Link zu einer externen Zahlungsseite f√ºhrt (wie PayPal, Stripe, Apple Pay)</strong><br data-start="101" data-end="104">
          Das PWA √∂ffnet die Zahlungsseite wie eine normale Webseite im Browser. Wenn das PWA im <code data-start="142" data-end="154">standalone</code> Modus l√§uft (ohne Adressleiste), k√∂nnte es sein, dass einige Zahlungsseiten keine neue Fenster √∂ffnen, sondern die aktuelle PWA-Oberfl√§che ersetzen.<br data-start="200" data-end="203">
          Einige mobile Browser (wie iOS Safari) k√∂nnten die Zahlungsseite im Standardbrowser √∂ffnen, statt sie innerhalb des PWAs zu verarbeiten.</p>
        </li>
        <li data-start="265" data-end="377">
          <p data-start="267" data-end="377"><strong data-start="267" data-end="302">Wenn eine WebView aufgerufen wird (wie Stripe Checkout)</strong><br data-start="302" data-end="305">
          Die Zahlung kann weiterhin abgeschlossen werden, und die Erfahrung ist die gleiche wie auf einer normalen Webseite. Aber einige Zahlungsanbieter (wie der App Store) k√∂nnten verlangen, dass die Zahlung √ºber In-App-K√§ufe erfolgt, und das PWA k√∂nnte das Abonnement nicht abschlie√üen.</p>
        </li>
        <li data-start="379" data-end="652">
          <p data-start="381" data-end="540"><strong data-start="381" data-end="426">Wenn ein Deep Link auf eine App verweist (wie bei PayPal / WeChat Pay)</strong><br data-start="426" data-end="429">
          Einige Zahlungsdienste (wie WeChat Pay, Alipay) erkennen das PWA und zwingen dazu, den Zahlungslink im Standardbrowser zu √∂ffnen.<br data-start="476" data-end="479">
          Um zu verhindern, dass das PWA "festh√§ngt", k√∂nnen Sie die Zahlungsseite manuell in einem neuen Fenster √∂ffnen.<br data-start="513" data-end="516">
          üìå <strong data-start="521" data-end="527">Beispiel</strong>: √ñffnen Sie die Zahlungsseite in einem neuen Tab</p>
          <pre class="!overflow-visible" data-start="543" data-end="620"><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre language-javascript"><span><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">open</span>(<span class="hljs-string">'https://your-payment-link.com'</span>, <span class="hljs-string">'_blank'</span>);
</span></code></div></pre>
          <p data-start="623" data-end="652">Auf diese Weise √∂ffnet sich die Zahlungsseite in einem neuen Fenster, ohne das PWA zu √ºberschreiben.</p>
        </li>
      </ul>
      <h3 data-start="654" data-end="687">2. Befindet sich das PWA auf einem iOS / Android-Ger√§t?</h3>
      <ul data-start="688" data-end="1264">
        <li data-start="688" data-end="929">
          <p data-start="690" data-end="929"><strong data-start="690" data-end="706">iOS (Safari)</strong><br data-start="706" data-end="709">
          Das PWA auf iOS unterst√ºtzt die Web Payment API des Service Workers nicht, daher k√∂nnen Apple Pay oder In-App-K√§ufe nicht verwendet werden. Viele Zahlungs-Gateways leiten automatisch zu Safari weiter, statt die Zahlung im PWA abzuschlie√üen.<br data-start="825" data-end="828">
          Abonnement-basierte Apps (wie Netflix, Spotify) fordern oft dazu auf, "die Zahlung im Safari-Browser abzuschlie√üen", da Apple es Web-Apps verbietet, den App Store In-App-Kauf zu umgehen.</p>
        </li>
        <li data-start="931" data-end="1264">
          <p data-start="933" data-end="1160"><strong data-start="933" data-end="953">Android (Chrome)</strong><br data-start="953" data-end="956">
          PWAs auf Android-Ger√§ten k√∂nnen in der Regel problemlos Google Pay, Stripe Checkout oder andere Web-Zahlungsmethoden verwenden. Einige Android-Ger√§te lassen das PWA m√∂glicherweise √ºber Chrome Custom Tabs oder den Standardbrowser abwickeln. Wenn die Zahlung abgeschlossen ist und der Nutzer zur√ºck zum PWA will, k√∂nnen Sie <code data-start="1101" data-end="1114">postMessage</code> verwenden, um das PWA auf das Zahlungsergebnis zu h√∂ren.<br data-start="1128" data-end="1131">
          üìå <strong data-start="1136" data-end="1142">Beispiel</strong>: Erkennen, ob das PWA auf iOS l√§uft</p>
          <pre class="!overflow-visible" data-start="1163" data-end="1264"><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre language-javascript"><span><span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">navigator</span>.<span class="hljs-property">standalone</span>) {
  <span class="hljs-title function_">alert</span>(<span class="hljs-string">"Bitte √∂ffnen Sie den Kauf-Link in Safari, um eine erfolgreiche Zahlung sicherzustellen!"</span>);
}
</span></code></div></pre>
        </li>
      </ul>
      <h3 data-start="1266" data-end="1286">3. Wie geht man mit der R√ºckkehr nach der Zahlung um?</h3>
      <p data-start="1287" data-end="1330">Nach dem Kauf m√∂chten Sie m√∂glicherweise, dass der Nutzer zum PWA zur√ºckkehrt, anstatt auf der Zahlungsseite zu bleiben. Hier sind einige M√∂glichkeiten, damit umzugehen:</p>
      <ul data-start="1332" data-end="2186">
        <li data-start="1332" data-end="1488">
          <p data-start="1334" data-end="1405"><strong data-start="1334" data-end="1370">Methode 1: √ñffnen Sie die Zahlungsseite mit <code data-start="1344" data-end="1361">target="_blank"</code></strong><br data-start="1370" data-end="1373">
          Auf diese Weise wird die Zahlungsseite in einem neuen Fenster ge√∂ffnet, und das PWA l√§uft im Hintergrund weiter.</p>
          <pre class="!overflow-visible" data-start="1408" data-end="1488"><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre language-html"><span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://your-payment-link.com"</span> <span class="hljs-attr">target</span>=<span class="hljs-string">"_blank"</span>&gt;</span>Abonnement kaufen<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
</span></code></div></pre>
        </li>
        <li data-start="1490" data-end="1920">
          <p data-start="1492" data-end="1563"><strong data-start="1492" data-end="1519">Methode 2: Verwenden Sie die Web Payment API</strong><br data-start="1519" data-end="1522">
          Geeignet f√ºr Browser, die die Web Payment API unterst√ºtzen (wie Chrome).</p>
          <pre class="!overflow-visible" data-start="1566" data-end="1920"><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre language-javascript"><span><span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">PaymentRequest</span>) {
  <span class="hljs-keyword">const</span> request = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PaymentRequest</span>([{ <span class="hljs-attr">supportedMethods</span>: <span class="hljs-string">"basic-card"</span> }], { 
    <span class="hljs-attr">total</span>: { <span class="hljs-attr">label</span>: <span class="hljs-string">"Abonnement"</span>, <span class="hljs-attr">amount</span>: { <span class="hljs-attr">currency</span>: <span class="hljs-string">"USD"</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"9.99"</span> } }
  });

  request.<span class="hljs-title function_">show</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> response.<span class="hljs-title function_">complete</span>(<span class="hljs-string">"success"</span>));
} <span class="hljs-keyword">else</span> {
  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">open</span>(<span class="hljs-string">"https://your-payment-link.com"</span>, <span class="hljs-string">"_blank"</span>);
}
</span></code></div></pre>
        </li>
        <li data-start="1922" data-end="2110">
          <p data-start="1924" data-end="2005"><strong data-start="1924" data-end="1946">Methode 3: R√ºckkehr zum PWA nach erfolgreicher Zahlung</strong><br data-start="1946" data-end="1949">
          Lassen Sie die Zahlungsseite nach erfolgreichem Abschluss zur√ºck zum PWA umleiten (z. B. <code data-start="1971" data-end="2001">https://your-pwa.com/success</code>):</p>
          <pre class="!overflow-visible" data-start="2008" data-end="2110"><div class="overflow-y-auto p-4" dir="ltr"><code class="!whitespace-pre language-html"><span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://your-payment-link.com?return_url=https://your-pwa.com/success"</span>&gt;</span>Abonnement kaufen<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
</span></code></div></pre>
        </li>
        <li data-start="2112" data-end="2186">
          <p data-start="2114" data-end="2186"><strong data-start="2114" data-end="2138">Methode 4: Webhook zum √úberwachen der Zahlungsergebnisse</strong><br data-start="2138" data-end="2141">
          Nach der serverseitigen Zahlungsvalidierung kann der PWA √ºber WebSockets oder Polling √ºber den Zahlungsstatus informiert werden.</p>
        </li>
      </ul>
      <h3 data-start="2188" data-end="2197">4. Zusammenfassung</h3>
      <p data-start="2198" data-end="2210">‚úÖ <strong data-start="2200" data-end="2208">Empfohlene Vorgehensweise</strong></p>
      <ul data-start="2211" data-end="2373" data-is-only-node="" data-is-last-node="">
        <li data-start="2211" data-end="2258">Verwenden Sie <code data-start="2216" data-end="2233">target="_blank"</code>, um die Zahlungsseite zu √∂ffnen und zu verhindern, dass das PWA durch die Zahlungsseite ersetzt wird.</li>
        <li data-start="2259" data-end="2293">Bieten Sie eine "Zur√ºck zum PWA"-Schaltfl√§che an, um sicherzustellen, dass der Nutzer problemlos zum PWA zur√ºckkehrt.</li>
        <li data-start="2294" data-end="2335">Verwenden Sie die Web Payment API auf Android-Ger√§ten, um die Zahlungserfahrung zu verbessern.</li>
        <li data-start="2336" data-end="2373" data-is-last-node="">Fordern Sie iOS-Nutzer auf, den Zahlungslink in Safari zu √∂ffnen, um Zahlungsausf√§lle zu vermeiden.</li>
      </ul>
    </div>
  </div>
</div>
